主线程的代码执行完毕时，是需要等待其他子线程运行完毕之后，才会结束掉主线程

主线程 wait 所有子线程

守护线程是需要等待进程内的所有非守护线程，都执行完毕之后才结束，是因为当所有子线程执行完毕之后，就会执行主线程，那么非守护线程是守护的主线程，所以当主线程执行完毕之后，守护线程就会结束



1、主线程内没有开启其他子线程时，设置守护进程

```python
import time
from threading import Thread

def task(name):
    print('%s is running'%name)
    time.sleep(2)
    print('%s is done'%name)

if __name__ == '__main__':
    t = Thread(target = task,args = ('子线程1',))
    t.daemon = True
    t.start()

    print('主线程')
#当主线程内，只有守护线程，没有其他子线程时，当主线程执行完毕，守护线程就会被结束掉
'''
子进程1 is running
主线程
'''
```



2、主线程内开启了其他子线程时，设置守护进程

```python
import time
from threading import Thread

def task(name):
    time.sleep(1)
    print('%s id running'%name)

def foo(name):
    print('%s is running'%name)
    time.sleep(3)
    print('%s is done'%name)

if __name__ == '__main__':
    t1 = Thread(target = task,args = ('task子线程',))
    t2 = Thread(target = foo,args = ('foo子线程',))

    t1.daemon = True
    t1.start()
    t2.start()

    print('主线程')
#主线程是需要等待所有子线程执行完毕之后，才会结束，所以守护线程是等待所有子线程和主线程都执行完毕之后，才会结束
'''
foo子线程 is running
主线程
task子线程 id running
foo子线程 is done
'''
```


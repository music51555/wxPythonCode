流程控制

**case when ... then ... end**

**当**...将其设置为...

```mysql
#在select语句中，可以添加case when 条件 then 结果 end
#case when t2.gid=1 then '低年级' when t2.gid in (5,6) then '高年级' end
#表示当t2.gid为1时，设置其值为低年级，当t2.gid在范围(5,6)中时，设置其值为高年级
mysql> select t1.cid as '班级id',t1.caption as '班级名称',t2.gname as '年级',(case when t2.gid in (1,2) then '低年级' when t2.gid in (3,4) then '中年级' when t2.gid in (5,6) then '高年级' end) from class as t1 inner join class_grade as t2 on t1.grade_id=t2.gid;
```



**case when ... then ... else ... end**

**当**...将其设置为...**否则**将其设置为...

```mysql
mysql> select t1.cid as '班级id',t1.caption as '班级名称',t2.gname as '年级',(case when t2.gid in(1,2) then '低年级' else '高年级' end) as '年级级别' from class as t1 inner join class_grade as t2 on t1.grade_id=t2.gid;
+----------+--------------+-----------+--------------+
| 班级id   | 班级名称     | 年级      | 年级级别     |
+----------+--------------+-----------+--------------+
|        1 | 一年一班     | 一年级    | 低年级       |
|        8 | 一年二班     | 一年级    | 低年级       |
|        9 | 一年三班     | 一年级    | 低年级       |
|       10 | 一年四班     | 一年级    | 低年级       |
|       15 | 一年五班     | 一年级    | 低年级       |
|       16 | 一年六班     | 一年级    | 低年级       |
|        2 | 二年一班     | 二年级    | 低年级       |
|       11 | 二年二班     | 二年级    | 低年级       |
|       12 | 二年三班     | 二年级    | 低年级       |
|        3 | 三年一班     | 三年级    | 高年级       |
|        4 | 三年二班     | 三年级    | 高年级       |
|       13 | 三年三班     | 三年级    | 高年级       |
|       14 | 三年四班     | 三年级    | 高年级       |
|       17 | 三年五班     | 三年级    | 高年级       |
|        5 | 四年一班     | 四年级    | 高年级       |
|       18 | 四年二班     | 四年级    | 高年级       |
|       19 | 四年三班     | 四年级    | 高年级       |
|       20 | 五年一班     | 五年级    | 高年级       |
|       21 | 五年二班     | 五年级    | 高年级       |
|       22 | 五年三班     | 五年级    | 高年级       |
|       23 | 五年四班     | 五年级    | 高年级       |
+----------+--------------+-----------+--------------+
```



**包含条件判断的流程控制**

```mysql
mysql> select t1.cid as '班级id',t1.caption as '班级名称',t2.gname as '年级',(case when t1.cid<=10 then '低年级' when t1.cid >10 and t1.cid<=20 then '中年级' when t1.cid>20 then '高年级' end ) as '年级级别' from class as t1 inner join class_grade as t2 on t1.grade_id=t2.gid;
+----------+--------------+-----------+--------------+
| 班级id   | 班级名称     | 年级      | 年级级别     |
+----------+--------------+-----------+--------------+
|        1 | 一年一班     | 一年级    | 低年级       |
|        8 | 一年二班     | 一年级    | 低年级       |
|        9 | 一年三班     | 一年级    | 低年级       |
|       10 | 一年四班     | 一年级    | 低年级       |
|       15 | 一年五班     | 一年级    | 中年级       |
|       16 | 一年六班     | 一年级    | 中年级       |
|        2 | 二年一班     | 二年级    | 低年级       |
|       11 | 二年二班     | 二年级    | 中年级       |
|       12 | 二年三班     | 二年级    | 中年级       |
|        3 | 三年一班     | 三年级    | 低年级       |
|        4 | 三年二班     | 三年级    | 低年级       |
|       13 | 三年三班     | 三年级    | 中年级       |
|       14 | 三年四班     | 三年级    | 中年级       |
|       17 | 三年五班     | 三年级    | 中年级       |
|        5 | 四年一班     | 四年级    | 低年级       |
|       18 | 四年二班     | 四年级    | 中年级       |
|       19 | 四年三班     | 四年级    | 中年级       |
|       20 | 五年一班     | 五年级    | 中年级       |
|       21 | 五年二班     | 五年级    | 高年级       |
|       22 | 五年三班     | 五年级    | 高年级       |
|       23 | 五年四班     | 五年级    | 高年级       |
+----------+--------------+-----------+--------------+
```


join查询（双下划线查询）：

将多张表连接在一起合并为一张表查询

子查询（基于对象的跨表查询）：

一个查询依赖于另一个查询结果之上



### 基于对象的跨表查询

多对一和多对多关系跨表查询正向查询：按字段，反向查询：表名_set.all()

#### 多对一关系跨表查询

```python
def query(request):
    # 跨表查询之正向查询：按字段查询
    # 一对多关系表中，在多的表中查询出外键publish字段的出版社对象，通过出版社对象查询出版社的其他信息
    book_obj=Book.objects.get(title='西游记')
    print(book_obj.publish.name)

    # 跨表查询之反向查询：表名_set.all()
    publish_obj=Publish.objects.get(name='北京出版社')
    # 出版社对象.book_set.all()，反向查询出与出版社对象关联的书籍对象，返回的是queryset类型
    print(publish_obj.book_set.all())

    return HttpResponse('OK')
```



#### 多对多关系跨表查询

```python
def query(request):
    # 跨表查询之正向查询：按字段查询
    # 书籍与作者是多对多关系，是通过书籍表models.ManyToManyField()创建的第三张表，所以通过书籍查询作者是正向查询
    book_obj=Book.objects.get(title='西游记')
    # 查询出西游记这本书的全部作者，然后进行for循环遍历每一个作者，打印alex,egon
    author_list=book_obj.authors.all()
    for author in author_list:
        print(author.name)

    # 跨表查询之反向查询：表名_set.all()
    author_obj=Author.objects.get(name='alex')
    book_list=author_obj.book_set.all()
    # 打印西游记
    for book in book_list:
        print(book.title)

    return HttpResponse('OK')
```
